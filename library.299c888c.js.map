{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAO,SAASC,EAAcC,GAuB5B,OArBoBA,EAAIC,KACtB,EAACC,GAAEA,EAAEC,MAAEA,EAAKC,YAAEA,EAAWC,OAAEA,EAAMC,aAAEA,MACjC,MAAMC,EAAO,IAAIC,KAAKF,GAAcG,cAKpC,MAAO,iCAAiCP,oGAEdE,WAAqBD,uRAMTA,qDAZfE,EACpBJ,KAAIS,GAASA,EAAMC,OACnBC,MAAM,EAAG,GACTC,KAAK,WAUkDN,qCAEpD,G,4CDdZ,MAAMO,EAAgB,IAAI,EAAAjB,EAAAkB,SAEpBC,EAAaC,SAASC,cAAc,4BACpCC,EAAWF,SAASC,cAAc,0BAClCE,EAAiBH,SAASC,cAAc,kBAExCG,EAAgBJ,SAASC,cAAc,gBAC7C,IAAII,EAAmB,GAMvBC,eAAeC,IAIb,GAHAL,EAASM,UAAUC,OATD,0BAUlBV,EAAWS,UAAUE,IAVH,2BAYbC,aAAaC,QAAQC,EAAAC,aAGxB,OAFAX,EAAeY,UAAY,QAC3BX,EAAcI,UAAUE,IAAI,uBAEvB,EACL,EAAAM,EAAAC,gBACA,MACMC,EADYC,KAAKC,MAAMT,aAAaC,QAAQC,EAAAC,cACtB9B,KAAIsB,MAAMe,SACbxB,EAAcyB,gBAAgBD,EAAKpC,MAG5DoB,QAAyBkB,QAAQC,IAAIN,GACrCO,EAAAC,QAAQjB,OAAO,KACf,MAAMkB,EAAS7C,EAAcuB,GAC7BF,EAAeY,UAAYY,EAAO/B,KAAK,IACvCQ,EAAcI,UAAUC,OAAO,sB,EAvBnCV,EAAW6B,iBAAiB,QAASrB,GACrCL,EAAS0B,iBAAiB,SA0B1BtB,iBAIE,GAHAP,EAAWS,UAAUC,OAhCH,0BAiClBP,EAASM,UAAUE,IAjCD,2BAmCbC,aAAaC,QAAQC,EAAAgB,WAGxB,OAFA1B,EAAeY,UAAY,QAC3BX,EAAcI,UAAUE,IAAI,uBAEvB,EACL,EAAAM,EAAAC,gBACA,MACMC,EADUC,KAAKC,MAAMT,aAAaC,QAAQC,EAAAgB,YACtB7C,KAAIsB,MAAMe,SACXxB,EAAcyB,gBAAgBD,EAAKpC,MAG5DoB,QAAyBkB,QAAQC,IAAIN,GACrCO,EAAAC,QAAQjB,OAAO,KACf,MAAMkB,EAAS7C,EAAcuB,GAC7BF,EAAeY,UAAYY,EAAO/B,KAAK,IACvCQ,EAAcI,UAAUC,OAAO,sB,KA5CnCF,I","sources":["src/js/out-of-local-storage.js","src/js/templates/library-card.js"],"sourcesContent":["import ApiService from './api.js';\nimport { renderLibrary } from './templates/library-card.js';\nimport { KEY_WATCHED, KEY_QUEUE } from './into-local-storage.js';\nimport { Loading } from 'notiflix';\nimport { addPreloader } from './preloader.js';\n\nconst addGalleryAPI = new ApiService();\n\nconst watchedBtn = document.querySelector('.library__button-watched');\nconst queueBtn = document.querySelector('.library__button-queue');\nconst libraryGallery = document.querySelector('.gallery__list');\nconst activeClass = 'library__button-active';\nconst nothingYetPic = document.querySelector('.nothing_yet');\nlet moviesCollection = [];\n\nwatchedBtn.addEventListener('click', getWatchedMovies);\nqueueBtn.addEventListener('click', getQueueMovies);\ngetWatchedMovies();\n\nasync function getWatchedMovies() {\n  queueBtn.classList.remove(activeClass);\n  watchedBtn.classList.add(activeClass);\n\n  if (!localStorage.getItem(KEY_WATCHED)) {\n    libraryGallery.innerHTML = '';\n    nothingYetPic.classList.add('nothing_yet-visible');\n    return;\n  } else {\n    addPreloader();\n    const watchedId = JSON.parse(localStorage.getItem(KEY_WATCHED));\n    const responses = watchedId.map(async item => {\n      const response = await addGalleryAPI.getMovieDetails(item.id);\n      return response;\n    });\n    moviesCollection = await Promise.all(responses);\n    Loading.remove(300);\n    const markup = renderLibrary(moviesCollection);\n    libraryGallery.innerHTML = markup.join('');\n    nothingYetPic.classList.remove('nothing_yet-visible');\n  }\n}\n\nasync function getQueueMovies() {\n  watchedBtn.classList.remove(activeClass);\n  queueBtn.classList.add(activeClass);\n\n  if (!localStorage.getItem(KEY_QUEUE)) {\n    libraryGallery.innerHTML = '';\n    nothingYetPic.classList.add('nothing_yet-visible');\n    return;\n  } else {\n    addPreloader();\n    const queueId = JSON.parse(localStorage.getItem(KEY_QUEUE));\n    const responses = queueId.map(async item => {\n      const response = await addGalleryAPI.getMovieDetails(item.id);\n      return response;\n    });\n    moviesCollection = await Promise.all(responses);\n    Loading.remove(300);\n    const markup = renderLibrary(moviesCollection);\n    libraryGallery.innerHTML = markup.join('');\n    nothingYetPic.classList.remove('nothing_yet-visible');\n  }\n}\n","export function renderLibrary(arr) {\n  const IMG_URL = 'https://image.tmdb.org/t/p/w500';\n  const libraryCard = arr.map(\n    ({ id, title, poster_path, genres, release_date }) => {\n      const date = new Date(release_date).getFullYear();\n      const filteredGenres = genres\n        .map(genre => genre.name)\n        .slice(0, 3)\n        .join(', ');\n      return `<li class=\"gallery__item\" id=\"${id}\">\n        <div class=\"gallery__film-box\">\n          <img src=\"${IMG_URL}${poster_path}\" alt=\"${title}\" class=\"gallery__film-poster\"/>\n          <button type=\"button\" class=\"gallery__trailer\">\n            <span class=\"trailer-text\">Watch trailer</span>\n          </button>\n        </div>\n        <div class=\"gallery__title-box\">\n          <h2 class=\"gallery__title-film\">${title}</h2>\n          <h3 class=\"gallery__genre-film\">${filteredGenres} | ${date}</h3>\n        </div>\n      </li>`;\n    }\n  );\n  return libraryCard;\n}\n"],"names":["$7rYDH","parcelRequire","$656fff47254dcba1$export$e7d1a4959038c5e5","arr","map","id","title","poster_path","genres","release_date","date","Date","getFullYear","genre","name","slice","join","$79dda667908e97dc$var$addGalleryAPI","default","$79dda667908e97dc$var$watchedBtn","document","querySelector","$79dda667908e97dc$var$queueBtn","$79dda667908e97dc$var$libraryGallery","$79dda667908e97dc$var$nothingYetPic","$79dda667908e97dc$var$moviesCollection","async","$79dda667908e97dc$var$getWatchedMovies","classList","remove","add","localStorage","getItem","$79MDI","KEY_WATCHED","innerHTML","$ioBS9","addPreloader","responses","JSON","parse","item","getMovieDetails","Promise","all","$7Y9D8","Loading","markup","addEventListener","KEY_QUEUE"],"version":3,"file":"library.299c888c.js.map"}