{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,0BCAO,SAASC,EAAcC,GAuB5B,OArBoBA,EAAIC,KACtB,SAAAC,G,IAAGC,EAAED,EAAFC,GAAIC,EAAKF,EAALE,MAAOC,EAAWH,EAAXG,YAAaC,EAAMJ,EAANI,OAAQC,EAAYL,EAAZK,aAC3BC,EAAO,IAAIC,KAAKF,GAAcG,cAC9BC,EAAiBL,EACpBL,KAAI,SAAAW,G,OAASA,EAAMC,I,IACnBC,MAAM,EAAG,GACTC,KAAK,MACR,MAAO,iCAESC,OAFwBb,EAAG,qEAEjBa,OAVd,mCAUmCA,OAArBX,EAAY,WAMAW,OANSZ,EAAM,uRAOfY,OADAZ,EAAM,qDACcY,OAApBL,EAAe,OAAUK,OAALR,EAAK,qC,+CDZ/DS,EAAgB,IAAI,EAAAC,EAAAC,SAEpBC,EAAaC,SAASC,cAAc,4BACpCC,EAAWF,SAASC,cAAc,0BAClCE,EAAiBH,SAASC,cAAc,kBACxCG,EAAc,yBACdC,EAAgBL,SAASC,cAAc,gBACzCK,EAAmB,G,SAMRC,I,OAAAC,EAAgBC,MAAAC,KAAAC,U,UAAhBH,I,OAAAA,EAAfI,EAAApC,EAAA,CAAAoC,EAAAC,GAAAC,MAAA,SAAAC,I,IAUUC,EACAC,EAMAC,E,qEAhBRhB,EAASiB,UAAUC,OAAOhB,GAC1BL,EAAWoB,UAAUE,IAAIjB,GAEpBkB,aAAaC,QAAQC,EAAAC,aAAY,C,sBACpCtB,EAAeuB,UAAY,GAC3BrB,EAAcc,UAAUE,IAAI,uB,iCAG5B,EAAAM,EAAAC,gBACMZ,EAAYa,KAAKC,MAAMR,aAAaC,QAAQC,EAAAC,cAC5CR,EAAYD,EAAUpC,IAAG,W,MAACgC,EAAApC,EAAA,CAAAoC,EAAAC,GAAAC,MAAA,SAAAiB,EAAMC,G,IAC9BC,E,kFAAiBrC,EAAcsC,gBAAgBF,EAAKlD,I,cAApDmD,EAAQE,EAAAC,K,kBACPH,G,2DAF6BD,G,gCAAP,I,UAINK,QAAQC,IAAIrB,G,QAArCX,EAAgBiC,EAAAH,KAChBI,EAAAC,QAAQrB,OAAO,KACTF,EAASxC,EAAc4B,GAC7BH,EAAeuB,UAAYR,EAAOxB,KAAK,IACvCW,EAAcc,UAAUC,OAAO,uB,4CAnBpBZ,EAAgBC,MAAAC,KAAAC,U,UAuBhB+B,I,OAAAA,EAAf9B,EAAApC,EAAA,CAAAoC,EAAAC,GAAAC,MAAA,SAAA6B,I,IAUUC,EACA3B,EAMAC,E,qEAhBRnB,EAAWoB,UAAUC,OAAOhB,GAC5BF,EAASiB,UAAUE,IAAIjB,GAElBkB,aAAaC,QAAQC,EAAAqB,WAAU,C,sBAClC1C,EAAeuB,UAAY,GAC3BrB,EAAcc,UAAUE,IAAI,uB,iCAG5B,EAAAM,EAAAC,gBACMgB,EAAUf,KAAKC,MAAMR,aAAaC,QAAQC,EAAAqB,YAC1C5B,EAAY2B,EAAQhE,IAAG,W,MAACgC,EAAApC,EAAA,CAAAoC,EAAAC,GAAAC,MAAA,SAAAiB,EAAMC,G,IAC5BC,E,kFAAiBrC,EAAcsC,gBAAgBF,EAAKlD,I,cAApDmD,EAAQE,EAAAC,K,kBACPH,G,2DAF2BD,G,gCAAP,I,UAIJK,QAAQC,IAAIrB,G,QAArCX,EAAgBwC,EAAAV,KAChBI,EAAAC,QAAQrB,OAAO,KACTF,EAASxC,EAAc4B,GAC7BH,EAAeuB,UAAYR,EAAOxB,KAAK,IACvCW,EAAcc,UAAUC,OAAO,uB,4CAnBpBsB,EAAcjC,MAAAC,KAAAC,U,CA3B7BZ,EAAWgD,iBAAiB,QAASxC,GACrCL,EAAS6C,iBAAiB,S,kBA0BXL,EAAcjC,MAAAC,KAAAC,U,IAzB7BJ,I","sources":["src/js/out-of-local-storage.js","src/js/templates/library-card.js"],"sourcesContent":["import ApiService from './api.js';\nimport { renderLibrary } from './templates/library-card.js';\nimport { KEY_WATCHED, KEY_QUEUE } from './into-local-storage.js';\nimport { Loading } from 'notiflix';\nimport { addPreloader } from './preloader.js';\n\nconst addGalleryAPI = new ApiService();\n\nconst watchedBtn = document.querySelector('.library__button-watched');\nconst queueBtn = document.querySelector('.library__button-queue');\nconst libraryGallery = document.querySelector('.gallery__list');\nconst activeClass = 'library__button-active';\nconst nothingYetPic = document.querySelector('.nothing_yet');\nlet moviesCollection = [];\n\nwatchedBtn.addEventListener('click', getWatchedMovies);\nqueueBtn.addEventListener('click', getQueueMovies);\ngetWatchedMovies();\n\nasync function getWatchedMovies() {\n  queueBtn.classList.remove(activeClass);\n  watchedBtn.classList.add(activeClass);\n\n  if (!localStorage.getItem(KEY_WATCHED)) {\n    libraryGallery.innerHTML = '';\n    nothingYetPic.classList.add('nothing_yet-visible');\n    return;\n  } else {\n    addPreloader();\n    const watchedId = JSON.parse(localStorage.getItem(KEY_WATCHED));\n    const responses = watchedId.map(async item => {\n      const response = await addGalleryAPI.getMovieDetails(item.id);\n      return response;\n    });\n    moviesCollection = await Promise.all(responses);\n    Loading.remove(300);\n    const markup = renderLibrary(moviesCollection);\n    libraryGallery.innerHTML = markup.join('');\n    nothingYetPic.classList.remove('nothing_yet-visible');\n  }\n}\n\nasync function getQueueMovies() {\n  watchedBtn.classList.remove(activeClass);\n  queueBtn.classList.add(activeClass);\n\n  if (!localStorage.getItem(KEY_QUEUE)) {\n    libraryGallery.innerHTML = '';\n    nothingYetPic.classList.add('nothing_yet-visible');\n    return;\n  } else {\n    addPreloader();\n    const queueId = JSON.parse(localStorage.getItem(KEY_QUEUE));\n    const responses = queueId.map(async item => {\n      const response = await addGalleryAPI.getMovieDetails(item.id);\n      return response;\n    });\n    moviesCollection = await Promise.all(responses);\n    Loading.remove(300);\n    const markup = renderLibrary(moviesCollection);\n    libraryGallery.innerHTML = markup.join('');\n    nothingYetPic.classList.remove('nothing_yet-visible');\n  }\n}\n","export function renderLibrary(arr) {\n  const IMG_URL = 'https://image.tmdb.org/t/p/w500';\n  const libraryCard = arr.map(\n    ({ id, title, poster_path, genres, release_date }) => {\n      const date = new Date(release_date).getFullYear();\n      const filteredGenres = genres\n        .map(genre => genre.name)\n        .slice(0, 3)\n        .join(', ');\n      return `<li class=\"gallery__item\" id=\"${id}\">\n        <div class=\"gallery__film-box\">\n          <img src=\"${IMG_URL}${poster_path}\" alt=\"${title}\" class=\"gallery__film-poster\"/>\n          <button type=\"button\" class=\"gallery__trailer\">\n            <span class=\"trailer-text\">Watch trailer</span>\n          </button>\n        </div>\n        <div class=\"gallery__title-box\">\n          <h2 class=\"gallery__title-film\">${title}</h2>\n          <h3 class=\"gallery__genre-film\">${filteredGenres} | ${date}</h3>\n        </div>\n      </li>`;\n    }\n  );\n  return libraryCard;\n}\n"],"names":["$bpxeT","parcelRequire","$e1ab9b4c2767d6c8$export$e7d1a4959038c5e5","arr","map","param","id","title","poster_path","genres","release_date","date","Date","getFullYear","filteredGenres","genre","name","slice","join","concat","$06e4a73c72f3fd49$var$addGalleryAPI","$b7ONl","default","$06e4a73c72f3fd49$var$watchedBtn","document","querySelector","$06e4a73c72f3fd49$var$queueBtn","$06e4a73c72f3fd49$var$libraryGallery","$06e4a73c72f3fd49$var$activeClass","$06e4a73c72f3fd49$var$nothingYetPic","$06e4a73c72f3fd49$var$moviesCollection","$06e4a73c72f3fd49$var$getWatchedMovies","$06e4a73c72f3fd49$var$_getWatchedMovies","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee1","watchedId","responses","markup","classList","remove","add","localStorage","getItem","$czDmN","KEY_WATCHED","innerHTML","$4smAb","addPreloader","JSON","parse","_callee","item","response","getMovieDetails","_ctx","sent","Promise","all","_ctx1","$6JpON","Loading","$06e4a73c72f3fd49$var$_getQueueMovies","_callee2","queueId","KEY_QUEUE","_ctx2","addEventListener"],"version":3,"file":"library.33bfc616.js.map"}