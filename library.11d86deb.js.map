{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,0BCAO,SAASC,EAAcC,GAuB5B,OArBoBA,EAAIC,KACtB,SAAAC,G,IAAGC,EAAED,EAAFC,GAAIC,EAAKF,EAALE,MAAOC,EAAWH,EAAXG,YAAaC,EAAMJ,EAANI,OAAQC,EAAYL,EAAZK,aAC3BC,EAAO,IAAIC,KAAKF,GAAcG,cAC9BC,EAAiBL,EACpBL,KAAI,SAAAW,G,OAASA,EAAMC,I,IACnBC,MAAM,EAAG,GACTC,KAAK,MACR,MAAO,iCAESC,OAFwBb,EAAG,qEAEjBa,OAVd,mCAUmCA,OAArBX,EAAY,WAMAW,OANSZ,EAAM,uRAOfY,OADAZ,EAAM,qDACcY,OAApBL,EAAe,OAAUK,OAALR,EAAK,qC,qBDd/DS,EAAgB,IAAI,EAAAC,EAAAC,SAEpBC,EAAaC,SAASC,cAAc,4BACpCC,EAAWF,SAASC,cAAc,0BAClCE,EAAiBH,SAASC,cAAc,kBAC1CG,EAAmB,G,SAMRC,I,OAAAC,EAAgBC,MAAAC,KAAAC,U,UAAhBH,I,OAAAA,EAAfI,EAAAlC,EAAA,CAAAkC,EAAAC,GAAAC,MAAA,SAAAC,I,IAKUC,EACAC,EAKAC,E,qEAVHC,aAAaC,QAAQC,EAAAC,aAAY,C,sBACpCjB,EAAekB,UAAY,G,iCAGrBP,EAAYQ,KAAKC,MAAMN,aAAaC,QAAQC,EAAAC,cAC5CL,EAAYD,EAAUlC,IAAG,W,MAAC8B,EAAAlC,EAAA,CAAAkC,EAAAC,GAAAC,MAAA,SAAAY,EAAMC,G,IAC9BC,E,kFAAiB9B,EAAc+B,gBAAgBF,EAAK3C,I,cAApD4C,EAAQE,EAAAC,K,kBACPH,G,2DAF6BD,G,gCAAP,I,SAINK,QAAQC,IAAIhB,G,OAArCX,EAAgB4B,EAAAH,KACVb,EAAStC,EAAc0B,GAC7BD,EAAekB,UAAYL,EAAOtB,KAAK,I,4CAZ5BY,EAAgBC,MAAAC,KAAAC,U,UAgBhBwB,I,OAAAA,EAAfvB,EAAAlC,EAAA,CAAAkC,EAAAC,GAAAC,MAAA,SAAAsB,I,IAKUC,EACApB,EAKAC,E,qEAVHC,aAAaC,QAAQC,EAAAiB,WAAU,C,sBAClCjC,EAAekB,UAAY,G,iCAGrBc,EAAUb,KAAKC,MAAMN,aAAaC,QAAQC,EAAAiB,YAC1CrB,EAAYoB,EAAQvD,IAAG,W,MAAC8B,EAAAlC,EAAA,CAAAkC,EAAAC,GAAAC,MAAA,SAAAY,EAAMC,G,IAC5BC,E,kFAAiB9B,EAAc+B,gBAAgBF,EAAK3C,I,cAApD4C,EAAQE,EAAAC,K,kBACPH,G,2DAF2BD,G,gCAAP,I,SAIJK,QAAQC,IAAIhB,G,OAArCX,EAAgBiC,EAAAR,KACVb,EAAStC,EAAc0B,GAC7BD,EAAekB,UAAYL,EAAOtB,KAAK,I,4CAZ5BuC,EAAc1B,MAAAC,KAAAC,U,CApB7BV,EAAWuC,iBAAiB,QAASjC,GACrCH,EAASoC,iBAAiB,S,kBAmBXL,EAAc1B,MAAAC,KAAAC,U,IAlB7BJ,I","sources":["src/js/out-of-local-storage.js","src/js/templates/library-card.js"],"sourcesContent":["import ApiService from './api.js';\nimport { renderLibrary } from './templates/library-card.js';\nimport { KEY_WATCHED, KEY_QUEUE } from './into-local-storage.js';\n\nconst addGalleryAPI = new ApiService();\n\nconst watchedBtn = document.querySelector('.library__button-watched');\nconst queueBtn = document.querySelector('.library__button-queue');\nconst libraryGallery = document.querySelector('.gallery__list');\nlet moviesCollection = [];\n\nwatchedBtn.addEventListener('click', getWatchedMovies);\nqueueBtn.addEventListener('click', getQueueMovies);\ngetWatchedMovies();\n\nasync function getWatchedMovies() {\n  if (!localStorage.getItem(KEY_WATCHED)) {\n    libraryGallery.innerHTML = '';\n    return;\n  } else {\n    const watchedId = JSON.parse(localStorage.getItem(KEY_WATCHED));\n    const responses = watchedId.map(async item => {\n      const response = await addGalleryAPI.getMovieDetails(item.id);\n      return response;\n    });\n    moviesCollection = await Promise.all(responses);\n    const markup = renderLibrary(moviesCollection);\n    libraryGallery.innerHTML = markup.join('');\n  }\n}\n\nasync function getQueueMovies() {\n  if (!localStorage.getItem(KEY_QUEUE)) {\n    libraryGallery.innerHTML = '';\n    return;\n  } else {\n    const queueId = JSON.parse(localStorage.getItem(KEY_QUEUE));\n    const responses = queueId.map(async item => {\n      const response = await addGalleryAPI.getMovieDetails(item.id);\n      return response;\n    });\n    moviesCollection = await Promise.all(responses);\n    const markup = renderLibrary(moviesCollection);\n    libraryGallery.innerHTML = markup.join('');\n  }\n}\n\n// import ApiService from './api.js';\n// import { KEY_WATCHED, KEY_QUEUE } from './into-local-storage.js';\n// // import { addPreloader } from './preloader';\n// // import { Notify, Loading } from 'notiflix';\n// import { renderLibrary } from './templates/library-card.js';\n\n// const libraryApi = new ApiService();\n// export const libraryWatched = document.querySelector('.button__watched');\n// export const libraryQueue = document.querySelector('.button__queue');\n// let moviesCollection = [];\n// const libraryGallery = document.querySelector('.gallery__list');\n\n// libraryWatched.addEventListener('click', getWatchedMovies);\n// libraryQueue.addEventListener('click', getQueueMovies);\n// getWatchedMovies();\n\n// async function getWatchedMovies() {\n//   if (!localStorage.getItem(KEY_WATCHED)) {\n//     libraryGallery.innerHTML = '';\n//     return;\n//   }\n//   const data = JSON.parse(localStorage.getItem(KEY_WATCHED));\n//   const responses = data.map(async item => {\n//     const response = await libraryApi.getMovieDetails(item.id);\n\n//     return response;\n//   });\n\n//   moviesCollection = await Promise.all(responses);\n//   const arrMarkup = renderLibrary(moviesCollection);\n//   libraryGallery.innerHTML = arrMarkup.join('');\n// }\n\n// async function getQueueMovies() {\n//   if (!localStorage.getItem(KEY_QUEUE)) {\n//     libraryGallery.innerHTML = '';\n//     return;\n//   }\n//   const data = JSON.parse(localStorage.getItem(KEY_QUEUE));\n//   const responses = data.map(async item => {\n//     const response = await libraryApi.getMovieDetails(item.id);\n\n//     return response;\n//   });\n\n//   moviesCollection = await Promise.all(responses);\n//   const arrMarkup = renderLibrary(moviesCollection);\n//   libraryGallery.innerHTML = arrMarkup.join('');\n// }\n","export function renderLibrary(arr) {\n  const IMG_URL = 'https://image.tmdb.org/t/p/w500';\n  const libraryCard = arr.map(\n    ({ id, title, poster_path, genres, release_date }) => {\n      const date = new Date(release_date).getFullYear();\n      const filteredGenres = genres\n        .map(genre => genre.name)\n        .slice(0, 3)\n        .join(', ');\n      return `<li class=\"gallery__item\" id=\"${id}\">\n        <div class=\"gallery__film-box\">\n          <img src=\"${IMG_URL}${poster_path}\" alt=\"${title}\" class=\"gallery__film-poster\"/>\n          <button type=\"button\" class=\"gallery__trailer\">\n            <span class=\"trailer-text\">Watch trailer</span>\n          </button>\n        </div>\n        <div class=\"gallery__title-box\">\n          <h2 class=\"gallery__title-film\">${title}</h2>\n          <h3 class=\"gallery__genre-film\">${filteredGenres} | ${date}</h3>\n        </div>\n      </li>`;\n    }\n  );\n  return libraryCard;\n}\n\n// export function renderLibrary(arr) {\n//   const IMG_URL = 'https://image.tmdb.org/t/p/w500';\n\n//   const libraryCard = arr.map(\n//     ({ genres, id, poster_path, release_date, title }) => {\n//       const date = new Date(release_date).getFullYear();\n//       const filteredGenres = genres\n//         .map(genre => genre.name)\n//         .splice(0, 3)\n//         .join(', ');\n\n//       return `\n//       <li class=\"gallery__item\" id=\"${id}\">\n//         <div class=\"gallery__film-box\">\n//           <img src=\"${IMG_URL}${poster_path}\" alt=\"${title}\" class=\"gallery__film-poster\"/>\n//           <button type=\"button\" class=\"gallery__trailer\">\n//             <span class=\"trailer-text\">Watch trailer</span>\n//           </button>\n//         </div>\n//         <div class=\"gallery__title-box\">\n//           <h2 class=\"gallery__title-film\">${title}</h2>\n//           <h3 class=\"gallery__genre-film\">${filteredGenres} | ${date}</h3>\n//         </div>\n//       </li>`;\n//     }\n//   );\n\n//   return libraryCard;\n// }\n"],"names":["$bpxeT","parcelRequire","$e1ab9b4c2767d6c8$export$e7d1a4959038c5e5","arr","map","param","id","title","poster_path","genres","release_date","date","Date","getFullYear","filteredGenres","genre","name","slice","join","concat","$06e4a73c72f3fd49$var$addGalleryAPI","$b7ONl","default","$06e4a73c72f3fd49$var$watchedBtn","document","querySelector","$06e4a73c72f3fd49$var$queueBtn","$06e4a73c72f3fd49$var$libraryGallery","$06e4a73c72f3fd49$var$moviesCollection","$06e4a73c72f3fd49$var$getWatchedMovies","$06e4a73c72f3fd49$var$_getWatchedMovies","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee1","watchedId","responses","markup","localStorage","getItem","$czDmN","KEY_WATCHED","innerHTML","JSON","parse","_callee","item","response","getMovieDetails","_ctx","sent","Promise","all","_ctx1","$06e4a73c72f3fd49$var$_getQueueMovies","_callee2","queueId","KEY_QUEUE","_ctx2","addEventListener"],"version":3,"file":"library.11d86deb.js.map"}